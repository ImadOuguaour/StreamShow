import{r as c,m as P,n as E,o as D,p as N,k as w,u as M,q as A,l as _,j as e,M as h}from"./index-_3Uvv5pk.js";import{D as v}from"./index-g4ygQZ59.js";import{a as C,T as F}from"./index-CSfmTKHi.js";const I=(a,s)=>{const[r,o]=c.useState(a);return c.useEffect(()=>{const i=setTimeout(()=>{o(a)},s);return()=>{clearTimeout(i)}},[a,s]),r},V="92b418e837b833be308bbfb1fb2aca1e",T=(a,s=1)=>async r=>{r(P());try{const o=await C.get(`${F}/search/multi?api_key=${V}&query=${a}&language=en-US&page=${s}`);r(E(o.data))}catch(o){console.log("error when fetching movies : ",o),r(D())}},R=()=>{const[a,s]=N(),[r,o]=c.useState(()=>a.get("media")||""),[i,u]=c.useState(1),{resultSearch:d,loading:g,error:f,totalResults:m,totalPages:p}=w(t=>t.search),l=M(),x=A(),n=I(r,1500);c.useEffect(()=>{n?s({media:n}):(a.delete("media"),s(a),l(_()))},[n,a,s,l]),c.useEffect(()=>{n&&l(T(n,i))},[n,i,l]);const b=()=>{u(t=>t+1)},y=()=>{u(t=>t>1?t-1:t)},S=t=>{const j=t.target.value;u(1),o(j)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-gray-800 p-4 flex items-start justify-center",children:e.jsx("input",{className:"bg-gradient-to-b from-gray-900 to-gray-800 mt-10 px-4 py-2 w-1/2 md:w-1/3 border border-gray-300 rounded-md shadow-md text-white",onChange:S,placeholder:x.formatMessage({id:"searchPlaceholder"}),type:"text",value:r})}),e.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-gray-800 text-white py-2 items-start justify-center pl-3",children:m===0?e.jsx("span",{children:e.jsx(h,{id:"noItemFound"})}):e.jsxs("span",{children:[m," ",e.jsx(h,{id:"itemsFound"})]})}),e.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-gray-800 min-h-screen p-4",children:(d==null?void 0:d.length)>0&&e.jsx(v,{currentPage:i,error:f,loading:g,medias:d,onNextPage:b,onPreviousPage:y,totalPages:p})})]})};export{R as default};
